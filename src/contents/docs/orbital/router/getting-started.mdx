---
title: 'Router ì‹œì‘í•˜ê¸°'
path: 'orbital/router/getting-started'
product: 'Orbital'
category: 'Router'
lastUpdate: 2025-09-05
order: 21
---

## ê°œìš”

RouterëŠ” Orbitalì—ì„œ LUNE í”„ë¡œí† ì½œ ë©”ì‹œì§€ë¥¼ ì ì ˆí•œ í•¸ë“¤ëŸ¬ë¡œ ë¼ìš°íŒ…í•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤. Express.jsì™€ ìœ ì‚¬í•œ APIë¥¼ ì œê³µí•˜ë©°, RESTful ì„¤ê³„ íŒ¨í„´, ë¯¸ë“¤ì›¨ì–´ ì²´ì¸, ê²½ë¡œ ë§¤ê°œë³€ìˆ˜ ë“±ì„ ì§€ì›í•©ë‹ˆë‹¤.

## ê¸°ë³¸ ì‚¬ìš©ë²•

### Router ìƒì„±

```rust
use orbital::router::Router;

// ê¸°ë³¸ ë¼ìš°í„° ìƒì„±
let router = Router::new("My Router");

// ë² ì´ìŠ¤ ê²½ë¡œì™€ í•¨ê»˜ ìƒì„±
let api_router = Router::with_base_path("API Router", "/api");
```

### ê¸°ë³¸ ë¼ìš°íŠ¸ ë“±ë¡

```rust
use orbital::router::{Router, RouteResponse, RouteContext};
use serde_json::json;
use std::sync::Arc;

let mut router = Router::new("Main Router");

// READ ë¼ìš°íŠ¸ (GETê³¼ ìœ ì‚¬)
router.read("/", Arc::new(|_ctx: RouteContext| {
    Ok(RouteResponse::json(json!({
        "message": "Welcome to Orbital!",
        "protocol": "LUNE/1"
    })))
}));

router.read("/about", Arc::new(|_ctx: RouteContext| {
    Ok(RouteResponse::text("About page"))
}));

// CREATE ë¼ìš°íŠ¸ (POSTì™€ ìœ ì‚¬)
router.create("/users", Arc::new(|ctx: RouteContext| {
    let name = ctx.body_field("name")
        .and_then(|v| v.as_str())
        .unwrap_or("Unknown");

    Ok(RouteResponse::created(json!({
        "id": 123,
        "name": name,
        "created_at": chrono::Utc::now().to_rfc3339()
    })))
}));
```

## LUNE í”„ë¡œí† ì½œ ë©”ì„œë“œ

RouterëŠ” LUNE í”„ë¡œí† ì½œì˜ CRUD ë©”ì„œë“œë“¤ì„ ì§€ì›í•©ë‹ˆë‹¤:

```rust
use orbital::router::{Router, RouteResponse};
use std::sync::Arc;

let mut router = Router::new("CRUD Router");

// READ - ë°ì´í„° ì¡°íšŒ (HTTP GETê³¼ ìœ ì‚¬)
router.read("/users", Arc::new(|_ctx| {
    Ok(RouteResponse::json(serde_json::json!({
        "users": [
            {"id": 1, "name": "Alice"},
            {"id": 2, "name": "Bob"}
        ]
    })))
}));

// CREATE - ë°ì´í„° ìƒì„± (HTTP POSTì™€ ìœ ì‚¬)
router.create("/users", Arc::new(|ctx| {
    let name = ctx.body_field("name")
        .and_then(|v| v.as_str())
        .unwrap_or("Unknown");

    Ok(RouteResponse::created(serde_json::json!({
        "id": 123,
        "name": name
    })))
}));

// UPDATE - ë°ì´í„° ìˆ˜ì • (HTTP PUTê³¼ ìœ ì‚¬)
router.update("/users/:id", Arc::new(|ctx| {
    let user_id = ctx.param("id").unwrap_or("0".to_string());
    let name = ctx.body_field("name")
        .and_then(|v| v.as_str())
        .unwrap_or("Unknown");

    Ok(RouteResponse::json(serde_json::json!({
        "id": user_id.parse::<i32>().unwrap_or(0),
        "name": name,
        "updated_at": chrono::Utc::now().to_rfc3339()
    })))
}));

// REMOVE - ë°ì´í„° ì‚­ì œ (HTTP DELETEì™€ ìœ ì‚¬)
router.remove("/users/:id", Arc::new(|ctx| {
    let user_id = ctx.param("id").unwrap_or("0".to_string());

    Ok(RouteResponse::json(serde_json::json!({
        "message": format!("User {} deleted", user_id),
        "deleted_at": chrono::Utc::now().to_rfc3339()
    })))
}));
```

### JSON ì‘ë‹µì„ ìœ„í•œ í¸ì˜ ë©”ì„œë“œ

```rust
// read_json - JSON ì‘ë‹µì„ ì§ì ‘ ë°˜í™˜
router.read_json("/simple", |_ctx| {
    serde_json::json!({
        "message": "Simple JSON response",
        "timestamp": chrono::Utc::now().timestamp()
    })
});

// ë‹¤ë¥¸ ë©”ì„œë“œë“¤ë„ _json ë³€í˜•ì´ ìˆìŠµë‹ˆë‹¤
router.create_json("/simple-create", |ctx| {
    serde_json::json!({
        "created": true,
        "data": ctx.body_json().unwrap_or_default()
    })
});
```

## ê²½ë¡œ ë§¤ê°œë³€ìˆ˜

### ë‹¨ì¼ ë§¤ê°œë³€ìˆ˜

```rust
async fn get_user(ctx: RouteContext) -> Result<RouteResponse, Box<dyn std::error::Error>> {
    let user_id = ctx.param("id").unwrap_or("0".to_string());
    Ok(RouteResponse::json(serde_json::json!({
        "user_id": user_id,
        "name": "John Doe"
    })))
}

router.read("/users/:id", Arc::new(get_user));
```

### ì—¬ëŸ¬ ë§¤ê°œë³€ìˆ˜

```rust
router.read("/users/:user_id/posts/:post_id", Arc::new(|ctx| {
    let user_id = ctx.param("user_id").unwrap_or("0".to_string());
    let post_id = ctx.param("post_id").unwrap_or("0".to_string());

    Ok(RouteResponse::json(serde_json::json!({
        "user_id": user_id,
        "post_id": post_id,
        "title": "Sample Post"
    })))
}));
```

### ì™€ì¼ë“œì¹´ë“œ ë§¤ê°œë³€ìˆ˜

```rust
router.read("/files/*", Arc::new(|ctx| {
    let path = ctx.param("*").unwrap_or("".to_string());
    Ok(RouteResponse::text(format!("Caught path: {}", path)))
}));
```

## ìš”ì²­ ë° ì‘ë‹µ ì²˜ë¦¬

### ìš”ì²­ ë°ì´í„° ì ‘ê·¼

```rust
router.create("/users", Arc::new(|ctx| {
    // JSON ë³¸ë¬¸ ì „ì²´ íŒŒì‹±
    let body_json = ctx.body_json()?;

    // íŠ¹ì • í•„ë“œ ì ‘ê·¼
    let name = ctx.body_field("name")
        .and_then(|v| v.as_str())
        .unwrap_or("Unknown");

    let email = ctx.body_field("email")
        .and_then(|v| v.as_str())
        .unwrap_or("");

    // LUNE ë©”ì‹œì§€ ì ‘ê·¼
    let lune_message = ctx.lune_message();
    let message_type = lune_message.header().message_type();

    // ì—°ê²° ID
    let connection_id = ctx.connection_id();

    Ok(RouteResponse::created(serde_json::json!({
        "user": {
            "name": name,
            "email": email
        },
        "meta": {
            "message_type": message_type,
            "connection_id": connection_id
        }
    })))
}));
```

### ë‹¤ì–‘í•œ ì‘ë‹µ íƒ€ì…

```rust
// JSON ì‘ë‹µ
let json_response = RouteResponse::json(serde_json::json!({
    "message": "Success",
    "data": {"id": 123}
}));

// í…ìŠ¤íŠ¸ ì‘ë‹µ
let text_response = RouteResponse::text("Hello, World!");

// ì—ëŸ¬ ì‘ë‹µ
let error_response = RouteResponse::error(404, "Not Found");

// ìƒì„± ì‘ë‹µ (201 Created)
let created_response = RouteResponse::created(serde_json::json!({
    "id": 456,
    "created_at": chrono::Utc::now().to_rfc3339()
}));

// ì»¤ìŠ¤í…€ ì‘ë‹µ
let custom_response = RouteResponse::new()
    .status(201)
    .header("Content-Type", "application/json")
    .header("X-Custom-Header", "custom-value")
    .body(b"Custom response body".to_vec());
```

## ë¼ìš°íŠ¸ ê·¸ë£¹í™”

### ë² ì´ìŠ¤ ê²½ë¡œë¥¼ ì‚¬ìš©í•œ ê·¸ë£¹í™”

```rust
use orbital::application::OrbitApplication;

#[tokio::main]
async fn main() -> Result<(), Box<dyn std::error::Error>> {
    let mut app = OrbitApplication::new(None, None, None);

    // API v1 ë¼ìš°í„°
    let mut api_v1_router = Router::with_base_path("API v1", "/api/v1");
    api_v1_router.read("/users", Arc::new(|_ctx| {
        Ok(RouteResponse::json(serde_json::json!({"version": "1.0"})))
    }));

    // API v2 ë¼ìš°í„°
    let mut api_v2_router = Router::with_base_path("API v2", "/api/v2");
    api_v2_router.read("/users", Arc::new(|_ctx| {
        Ok(RouteResponse::json(serde_json::json!({"version": "2.0"})))
    }));

    // ê´€ë¦¬ì ë¼ìš°í„°
    let mut admin_router = Router::with_base_path("Admin", "/admin");
    admin_router.read("/dashboard", Arc::new(|_ctx| {
        Ok(RouteResponse::json(serde_json::json!({"page": "dashboard"})))
    }));

    app.register_routers(vec![api_v1_router, api_v2_router, admin_router])?;

    app.listen(8080).await?;

    Ok(())
}
```

## ë¹ ë¥¸ ì‹œì‘ ì˜ˆì œ

### RESTful API ì„œë²„

```rust
use orbital::application::OrbitApplication;
use orbital::router::{Router, RouteResponse};
use serde_json::json;
use std::sync::Arc;

#[tokio::main]
async fn main() -> Result<(), Box<dyn std::error::Error>> {
    let mut app = OrbitApplication::new(
        Some("RESTful Server".to_string()),
        None,
        None
    );

    let mut users_router = Router::with_base_path("Users API", "/api/users");

    // ì‚¬ìš©ì ëª©ë¡
    users_router.read("/", Arc::new(|_ctx| {
        Ok(RouteResponse::json(json!({
            "users": [
                {"id": 1, "name": "Alice", "email": "alice@example.com"},
                {"id": 2, "name": "Bob", "email": "bob@example.com"},
                {"id": 3, "name": "Charlie", "email": "charlie@example.com"}
            ]
        })))
    }));

    // íŠ¹ì • ì‚¬ìš©ì
    users_router.read("/:id", Arc::new(|ctx| {
        let user_id = ctx.param("id").unwrap_or("0".to_string());

        Ok(RouteResponse::json(json!({
            "user": {
                "id": user_id.parse::<i32>().unwrap_or(0),
                "name": format!("User {}", user_id),
                "email": format!("user{}@example.com", user_id)
            }
        })))
    }));

    // ì‚¬ìš©ì ìƒì„±
    users_router.create("/", Arc::new(|ctx| {
        let name = ctx.body_field("name")
            .and_then(|v| v.as_str())
            .unwrap_or("Unknown");
        let email = ctx.body_field("email")
            .and_then(|v| v.as_str())
            .unwrap_or("");

        Ok(RouteResponse::created(json!({
            "user": {
                "id": 999,
                "name": name,
                "email": email,
                "created_at": chrono::Utc::now().to_rfc3339()
            }
        })))
    }));

    // ì‚¬ìš©ì ìˆ˜ì •
    users_router.update("/:id", Arc::new(|ctx| {
        let user_id = ctx.param("id").unwrap_or("0".to_string());
        let name = ctx.body_field("name")
            .and_then(|v| v.as_str())
            .unwrap_or("Unknown");

        Ok(RouteResponse::json(json!({
            "user": {
                "id": user_id.parse::<i32>().unwrap_or(0),
                "name": name,
                "updated_at": chrono::Utc::now().to_rfc3339()
            }
        })))
    }));

    // ì‚¬ìš©ì ì‚­ì œ
    users_router.remove("/:id", Arc::new(|ctx| {
        let user_id = ctx.param("id").unwrap_or("0".to_string());

        Ok(RouteResponse::json(json!({
            "message": format!("User {} deleted successfully", user_id),
            "deleted_at": chrono::Utc::now().to_rfc3339()
        })))
    }));

    app.register(users_router)?;

    println!("ğŸš€ RESTful API ì„œë²„ê°€ í¬íŠ¸ 8080ì—ì„œ ì‹œì‘ë©ë‹ˆë‹¤...");
    println!("ğŸ“¡ ì‚¬ìš© ê°€ëŠ¥í•œ ì—”ë“œí¬ì¸íŠ¸:");
    println!("   READ   /api/users     - ì‚¬ìš©ì ëª©ë¡");
    println!("   READ   /api/users/:id - íŠ¹ì • ì‚¬ìš©ì");
    println!("   CREATE /api/users     - ì‚¬ìš©ì ìƒì„±");
    println!("   UPDATE /api/users/:id - ì‚¬ìš©ì ìˆ˜ì •");
    println!("   REMOVE /api/users/:id - ì‚¬ìš©ì ì‚­ì œ");

    app.listen(8080).await?;

    Ok(())
}
```

## ë‹¤ìŒ ë‹¨ê³„

Routerì˜ ê¸°ë³¸ ì‚¬ìš©ë²•ì„ ìµí˜”ë‹¤ë©´, ë‹¤ìŒ ë¬¸ì„œë“¤ì„ í†µí•´ ë” ê³ ê¸‰ ê¸°ëŠ¥ë“¤ì„ ì‚´í´ë³´ì„¸ìš”:

- [ë¯¸ë“¤ì›¨ì–´](/docs/orbital/router/middleware) - ë¯¸ë“¤ì›¨ì–´ ì²´ì¸ê³¼ ì»¤ìŠ¤í…€ ë¯¸ë“¤ì›¨ì–´
- [ì—ëŸ¬ ì²˜ë¦¬](/docs/orbital/router/error-handling) - ë¼ìš°íŠ¸ë³„ ì—ëŸ¬ ì²˜ë¦¬
- [ê³ ê¸‰ ë¼ìš°íŒ…](/docs/orbital/router/advanced) - ì¡°ê±´ë¶€ ë¼ìš°íŒ…ê³¼ ê³ ê¸‰ íŒ¨í„´
