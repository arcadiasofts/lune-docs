---
import GlobalFooter from '@/components/ui/footer';
import GlobalHeader from '../components/ui/header';
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="generator" content={Astro.generator} />
    <title>Developers - Debuggers</title>
  </head>
  <body>
    <script is:inline>
      (function () {
        const getThemePreference = () => {
          try {
            if (
              typeof localStorage !== 'undefined' &&
              localStorage.getItem('theme')
            ) {
              return localStorage.getItem('theme');
            }
          } catch (e) {}
          return window.matchMedia('(prefers-color-scheme: dark)').matches
            ? 'dark'
            : 'light';
        };
        const isDark = getThemePreference() === 'dark';
        document.documentElement.classList[isDark ? 'add' : 'remove']('dark');

        if (
          typeof MutationObserver !== 'undefined' &&
          typeof localStorage !== 'undefined'
        ) {
          const observer = new MutationObserver(() => {
            const isDark = document.documentElement.classList.contains('dark');
            try {
              localStorage.setItem('theme', isDark ? 'dark' : 'light');
            } catch (e) {}
          });
          observer.observe(document.documentElement, {
            attributes: true,
            attributeFilter: ['class'],
          });
        }
      })();
    </script>
    <GlobalHeader client:only="react" />
    <slot />
    <GlobalFooter />
  </body>
</html>
